---
name: multi-agent-operator-guide
description: Educate and operationalize strict multi-agent execution with a dedicated orchestrator and parallel subagents. Use when setting up, running, or troubleshooting swarm-style agent workflows, including task decomposition, lock management, context packaging, handoff contracts, and enforcement rules.
---

# Multi-Agent Operator Guide

Run a strict two-role architecture:
- One orchestrator for planning, locking, assignment, and integration.
- N parallel subagents for scoped execution only.

Load the role prompts from:
- `references/ORCHESTRATOR-AGENT.md`
- `references/PARALLELIZABLE-SUBAGENT.md`

## Quick Start

1. Load `references/ORCHESTRATOR-AGENT.md` and instantiate exactly one orchestrator.
2. Provide objective, constraints, environment state, and available models.
3. Require orchestrator output in its mandatory schema.
4. Spawn N subagents (`N < 10`) with prompts generated by orchestrator.
5. Enforce lock scopes before execution starts.
6. Collect subagent outputs, validate acceptance checks, and merge via orchestrator.

## Mandatory Operator Policy

- Never run subagents without explicit lock scopes.
- Never allow overlapping lock scopes across active subagents.
- Never allow a subagent to define its own task outside assignment.
- Always require append-only worklogs.
- Always route completion and retry decisions through orchestrator.

## Recommended Model Selection

- Orchestrator: highest-capability model available.
- Subagents: smallest model that still meets acceptance criteria for assigned task.
- Escalate a subagent model only after a concrete failure.

## Required Artifacts Per Run

- Canonical task ledger.
- Active lock table.
- Subagent assignment packets.
- Per-subagent worklog file.
- Final orchestrator integration report.

## Troubleshooting

- Lock conflict: pause conflicting tasks, re-issue lock table, reassign.
- Missing context: mark task `blocked` and provide explicit missing inputs.
- Repeated failure: retry once with narrowed context, then replan serially.
- Scope drift: reject output and rerun with stricter forbidden-scope list.

## Do Not

- Do not mix orchestration and execution duties in one agent.
- Do not pass full repository context to every subagent.
- Do not mark tasks done without criterion-by-criterion acceptance checks.
